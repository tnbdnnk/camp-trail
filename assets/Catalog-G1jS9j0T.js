import{r as i,j as e,u as B,a as C,f as q,b as E}from"./index-Cy0CJman.js";import{P as j,A as F}from"./AdvertCard-CmUH2CC3.js";import{i as u}from"./symbol-defs-BemY1iVO.js";const G="_filter_i7472_1",R="_form_i7472_21",V="_location_i7472_30",$="_locationLabel_i7472_36",z="_locationInput_i7472_43",M="_horizontalLine_i7472_81",P="_checkbox_i7472_89",D="_checkboxGroup_i7472_96",K="_checkboxButton_i7472_103",U="_checkboxIcon_i7472_130",O="_checkboxLabelText_i7472_139",W="_checked_i7472_146",H="_radio_i7472_175",J="_radioGroup_i7472_182",Q="_radioButton_i7472_189",X="_radioIcon_i7472_218",Y="_radioLabelText_i7472_226",Z="_buttonContainer_i7472_264",ee="_searchButton_i7472_273",te="_resetSearchButton_i7472_292",t={filter:G,form:R,location:V,locationLabel:$,locationInput:z,horizontalLine:M,checkbox:P,checkboxGroup:D,checkboxButton:K,checkboxIcon:U,checkboxLabelText:O,checked:W,radio:H,radioGroup:J,radioButton:Q,radioIcon:X,radioLabelText:Y,buttonContainer:Z,searchButton:ee,resetSearchButton:te},T=({onFilter:l,resetFilter:x,filterCriteria:s})=>{const[k,h]=i.useState(s.location),[r,d]=i.useState(s.equipment),[m,p]=i.useState(s.type);i.useEffect(()=>{h(s.location),d(s.equipment),p(s.type),document.querySelectorAll(`.${t.radioButton}`).forEach(a=>{a.querySelector("input").value===s.type?a.classList.add(t.checked):a.classList.remove(t.checked)})},[s]);const v=c=>{c.preventDefault(),l({location:k,equipment:r,type:m})},N=()=>{h(""),d({}),p(""),document.querySelectorAll(`.${t.checkboxButton}`).forEach(n=>{n.classList.remove(t.checked)}),document.querySelectorAll(`.${t.radioButton}`).forEach(n=>{n.classList.remove(t.checked)}),x()},b=c=>{const{name:a,checked:n}=c.target;d(_=>({..._,[a]:n}));const L=c.target.closest(`.${t.checkboxButton}`);n?L.classList.add(t.checked):L.classList.remove(t.checked)},o=c=>{p(c.target.value),document.querySelectorAll(`.${t.radioButton}`).forEach(n=>{n.querySelector("input").value===c.target.value?n.classList.add(t.checked):n.classList.remove(t.checked)})};return e.jsx("section",{className:t.filter,children:e.jsxs("form",{onSubmit:v,className:t.form,children:[e.jsxs("div",{className:t.location,children:[e.jsx("span",{className:t.locationLabel,children:"Location"}),e.jsx("label",{children:e.jsx("input",{type:"text",placeholder:"Kyiv, Ukraine",value:k,onChange:c=>h(c.target.value),className:t.locationInput})})]}),e.jsx("h2",{children:"Filters"}),e.jsxs("div",{className:t.checkbox,children:[e.jsx("span",{children:"Vehicle equipment"}),e.jsx("hr",{className:t.horizontalLine}),e.jsxs("div",{className:t.checkboxGroup,children:[e.jsxs("label",{className:t.checkboxButton,children:[e.jsx("input",{type:"checkbox",name:"kitchen",checked:!!r.kitchen,onChange:b}),e.jsx("svg",{className:t.checkboxIcon,children:e.jsx("use",{href:u+"#icon-kitchen",width:"24",height:"24"})}),e.jsx("span",{className:t.checkboxLabelText,children:"Kitchen"})]}),e.jsxs("label",{className:t.checkboxButton,children:[e.jsx("input",{type:"checkbox",name:"airConditioner",checked:!!r.airConditioner,onChange:b}),e.jsx("svg",{className:t.checkboxIcon,children:e.jsx("use",{href:u+"#icon-wind",width:"24",height:"24"})}),e.jsx("span",{className:t.checkboxLabelText,children:"AC"})]}),e.jsxs("label",{className:t.checkboxButton,children:[e.jsx("input",{type:"checkbox",name:"beds",checked:!!r.beds,onChange:b}),e.jsx("svg",{className:t.checkboxIcon,children:e.jsx("use",{href:u+"#icon-bed",width:"24",height:"24"})}),e.jsx("span",{className:t.checkboxLabelText,children:"Beds"})]}),e.jsxs("label",{className:t.checkboxButton,children:[e.jsx("input",{type:"checkbox",name:"TV",checked:!!r.TV,onChange:b}),e.jsx("svg",{className:t.checkboxIcon,children:e.jsx("use",{href:u+"#icon-tv",width:"24",height:"24"})}),e.jsx("span",{className:t.checkboxLabelText,children:"TV"})]}),e.jsxs("label",{className:t.checkboxButton,children:[e.jsx("input",{type:"checkbox",name:"shower",checked:!!r.shower,onChange:b}),e.jsx("svg",{className:t.checkboxIcon,children:e.jsx("use",{href:u+"#icon-shower",width:"24",height:"24"})}),e.jsx("span",{className:t.checkboxLabelText,children:"Shower/WC"})]})]})]}),e.jsxs("div",{className:t.radio,children:[e.jsx("span",{children:"Vehicle type"}),e.jsx("hr",{className:t.horizontalLine}),e.jsxs("div",{className:t.radioGroup,children:[e.jsxs("label",{className:t.radioButton,children:[e.jsx("input",{type:"radio",name:"type",value:"panelTruck",checked:m==="panelTruck",onChange:o}),e.jsx("svg",{className:t.radioIcon,children:e.jsx("use",{href:u+"#icon-van",width:"42",height:"42"})}),e.jsx("span",{className:t.radioLabelText,children:"Van"})]}),e.jsxs("label",{className:t.radioButton,children:[e.jsx("input",{type:"radio",name:"type",value:"fullyIntegrated",checked:m==="fullyIntegrated",onChange:o}),e.jsx("svg",{className:t.radioIcon,children:e.jsx("use",{href:u+"#icon-fully-integrated",width:"42",height:"42"})}),e.jsx("span",{className:t.radioLabelText,children:"Fully Integrated"})]}),e.jsxs("label",{className:t.radioButton,children:[e.jsx("input",{type:"radio",name:"type",value:"alcove",checked:m==="alcove",onChange:o}),e.jsx("svg",{className:t.radioIcon,children:e.jsx("use",{href:u+"#icon-alcove",width:"42",height:"42"})}),e.jsx("span",{className:t.radioLabelText,children:"Alcove"})]})]})]}),e.jsxs("div",{className:t.buttonContainer,children:[e.jsx("button",{type:"button",onClick:N,className:t.resetSearchButton,children:"Reset Search"}),e.jsx("button",{type:"submit",className:t.searchButton,children:"Search"})]})]})})};T.propTypes={onFilter:j.func.isRequired,resetFilter:j.func.isRequired,filterCriteria:j.shape({location:j.string,equipment:j.object,type:j.string}).isRequired};const se="_advertListContainer_4eame_1",ce="_filterContainer_4eame_10",oe="_advertsList_4eame_14",ne="_loadMoreButton_4eame_28",g={advertListContainer:se,filterContainer:ce,advertsList:oe,loadMoreButton:ne},S=({initialFilterCriteria:l})=>{const x=B(),s=C(o=>o.adverts),[k,h]=i.useState([]),[r,d]=i.useState(l),[m,p]=i.useState(4);i.useEffect(()=>{x(q())},[x]),i.useEffect(()=>{h(s)},[s]),i.useEffect(()=>{l.type&&v(l)},[l]);const v=o=>{d(o);const{location:c,equipment:a,type:n}=o,L=s.filter(_=>{const I=c?_.location.toLowerCase().includes(c.toLowerCase()):!0,w=Object.keys(a).every(f=>f==="shower"&&a[f]?_.details.shower===1&&_.details.toilet===1:a[f]?_.details[f]===1:!0),A=n?_.form===n:!0;return I&&w&&A});h(L),p(4)},N=()=>{d({location:"",equipment:{},type:""}),h(s),p(4)},b=()=>{p(o=>o+4)};return e.jsxs("div",{className:g.advertListContainer,children:[e.jsx("div",{className:g.filterContainer,children:e.jsx(T,{onFilter:v,resetFilter:N,filterCriteria:r})}),e.jsxs("div",{className:g.advertsList,children:[k.slice(0,m).map(o=>e.jsx(F,{advert:o},o._id)),m<k.length&&e.jsx("button",{className:g.loadMoreButton,onClick:b,children:"Load more"})]})]})};S.propTypes={initialFilterCriteria:j.object.isRequired};const ae="_container_1q0pg_1",ie="_title_1q0pg_12",re="_advertList_1q0pg_20",y={container:ae,title:ie,advertList:re},ue=()=>{const l=B(),x=C(d=>d.adverts),s=E(),h=new URLSearchParams(s.search).get("type")||"";i.useEffect(()=>{x.length===0&&l(q())},[l,x.length]);const r={location:"",equipment:{},type:h};return e.jsx("div",{className:y.container,children:e.jsx("div",{className:y.advertList,children:e.jsx(S,{initialFilterCriteria:r})})})};export{ue as default};
